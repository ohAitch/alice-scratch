#!/usr/bin/env node
var symbol_41286509 = function(){}; symbol_41286509.prototype.symbol_41286509 = true; var sexp_32075946 = []; sexp_32075946.sexp_32075946 = true; ;['concat','slice','filter','map'].map(function(v){sexp_32075946[v] = function(){return ξ_as_sexp(Array.prototype[v].apply(this,arguments))}}); var ξ_create_symbol = function(v){var t = new symbol_41286509(); t.name = v; return t}; var ξ_as_sexp = function(v){v.__proto__ = sexp_32075946; return v}; var ξ_isa_symbol = function(v){return v&&v.symbol_41286509}; var ξ_isa_sexp = function(v){return v&&v.sexp_32075946}
var 

          fs = require('fs');var 
          path = require('path');var 
          _ = require('underscore');var 

          macros = {'η/typeof_object':function ξ_λ(
	                            v){return(ξ_as_sexp([ξ_create_symbol('ξ/='),ξ_as_sexp([ξ_create_symbol('ξ/js_typeof'),v]),'object']))},'η/typeof_boolean':function ξ_λ(
	                            v){return(ξ_as_sexp([ξ_create_symbol('ξ/='),ξ_as_sexp([ξ_create_symbol('ξ/js_typeof'),v]),'boolean']))},'η/typeof_number':function ξ_λ(
	                            v){return(ξ_as_sexp([ξ_create_symbol('ξ/='),ξ_as_sexp([ξ_create_symbol('ξ/js_typeof'),v]),'number']))},'η/typeof_string':function ξ_λ(
	                            v){return(ξ_as_sexp([ξ_create_symbol('ξ/='),ξ_as_sexp([ξ_create_symbol('ξ/js_typeof'),v]),'string']))},'η/typeof_function':function ξ_λ(
	                            v){return(ξ_as_sexp([ξ_create_symbol('ξ/='),ξ_as_sexp([ξ_create_symbol('ξ/js_typeof'),v]),'function']))},'η/member':function ξ_λ(
	                   o,m){return((((typeof                                m==='string')&&m.match((/^\w+$/)))? ξ_as_sexp([ξ_create_symbol('ξ/member_bare'),o,ξ_create_symbol(m)]) : ξ_as_sexp([ξ_create_symbol('ξ/member_val'),o,m])))},'η/+':function ξ_λ(
	              a,b){return(ξ_as_sexp([ξ_create_symbol('ξ/js_+'),a,b]))},'η/~':function ξ_λ(
	              a,b){return(ξ_as_sexp([ξ_create_symbol('ξ/js_+'),a,b]))},'η/fn':function ξ_λ(
	               params){{var 
		          args = Array.prototype.slice.call(arguments,0).slice(1);return(ξ_as_sexp([ξ_create_symbol('ξ/fn'),
		                       params,((                     args.length===1)?    args[0] : ξ_as_sexp([ξ_create_symbol('ξ/do_s')]).concat(args))]))}},'η/args':function ξ_λ(){return(ξ_as_sexp([ξ_as_sexp([ξ_create_symbol('\u03b9'),ξ_as_sexp([ξ_create_symbol('\u03b9'),ξ_as_sexp([ξ_create_symbol('\u03b9'),ξ_create_symbol('Array'),'prototype']),'slice']),'call']),ξ_create_symbol('arguments'),0]))},'``':function ξ_λ(

	             v){return((ξ_isa_sexp(
			                       v)? (((
				                             v[0]!==undefined)&&(       v[0].name==='~'))?    v[1] : ξ_as_sexp([ξ_create_symbol('ξ/as_sexp'),ξ_as_sexp([ξ_create_symbol('ξ/array')]).concat(v.map(  ξ_λ))])) : (ξ_isa_symbol(
			                         v)? ξ_as_sexp([ξ_create_symbol('ξ/create_symbol'),
				                           v.name]) : 
				v)))}};(


             macros['\u03b9'] = macros['η/member']);var 

          macro_expand = function ξ_λ(v){if (ξ_isa_sexp(
	                       v)) {while (
		                 macros[(             v[0]?      v[0].name :  undefined)]) (        v =      macros[      v[0].name].apply(      null,    v.slice(1)));return((ξ_isa_sexp(
		                                 v)?    v.map(   macro_expand) : v))} else return(
	            v)};var 


          sym_convert = function ξ_λ(v){{var t = ξ_create_symbol(v.s);(               t.pos =     v.pos);return(      t)}};var 
          sym_convert_back = function ξ_λ(v){{var t = {     s:   v.name};(                 t.pos =     v.pos);return(      t)}};var 
          val_to_more = function ξ_λ(v){return((
	              v.s?    sym_convert(v) : ((
	                            v instanceof Array)? ξ_as_sexp(v.map(val_to_more)) : 
		   v.v)))};var 

          more_to_val = function ξ_λ(v){return((ξ_isa_symbol(
	                         v)? sym_convert_back(v) : (ξ_isa_sexp(
	                       v)?          Array.prototype.map.call(         v,more_to_val) : {
		           v:v})))};var 


          η_s = function ξ_λ(in_){return(more_to_val( macro_expand( val_to_more(in_))).slice(1))};(
             module.exports =  η_s)