#!/usr/bin/env Œ∂

io ‚Üê require('socket.io-client')

server ‚Üê io('http://localhost:65330/')

me‚Üê;
friend‚Üê;

server
	.on('your_name',name=>{ me = { name, addrs:[] }; console.log('my name',name) })
	.on('they_are',Œπ=>{ friend = Œπ; console.log('they_are',Œπ) })

server.emit('talk_to','7ctvbp999d')

// socket.emit('chat message', 'now im here')

// $('form').submit(=>{
//   socket.emit('chat message', $('#m').val())
//   $('#m').val('')
//   ‚Ü© ‚úó
// })
// socket.on('chat message', Œª(msg){
//   $('#messages').append($('<li>').text(msg))
// })



/*
‚Ä° im anon.
‚óç hi anon, your name is üé≤id(10)

‚Ä° im anon. here's some of my address.
‚óç got it, i'll remember it while you're connected.

‚Ä° im anon. here's some of my address. and that's all.
‚óç got it, i'll remember it for a while. good to know.

‚Ä° im anon. can i talk to <name>?
‚óç yeah ill introduce you. here's the info i've got so far
‚óç here's more info
‚óç that's all

‚óç hey, <name> wants to talk to you. here's the info i have on them so far.
‚óç here's more info
‚óç that's all
*/



















// signalingChannel ‚Üê new SignalingChannel()
// pc‚Üê;

// // call start() to initiate

// Œª start() {
//   pc = new RTCPeerConnection({ iceServers:[{url:'stun:stun.l.google.com:19302'}] })

//   // send any ice candidates to the other peer
//   pc.onicecandidate = Œª (evt) {
//     if (evt.candidate)
//       signalingChannel.send(JSON.stringify({
//         'candidate': evt.candidate
//       }))
//   }

//   // let the 'negotiationneeded' event trigger offer generation
//   pc.onnegotiationneeded = Œª () {
//     pc.createOffer(localDescCreated, logError)
//   }

//   // once remote stream arrives, show it in the remote video element
//   pc.onaddstream = Œª (evt) {
//     remoteView.src = URL.createObjectURL(evt.stream)
//   }

//   // get a local stream, show it in a self-view and add it to be sent
//   navigator.getUserMedia({
//     'audio': ‚úì,
//     'video': ‚úì
//   }, Œª (stream) {
//     selfView.src = URL.createObjectURL(stream)
//     pc.addStream(stream)
//   }, logError)
// }

// Œª localDescCreated(desc) {
//   pc.setLocalDescription(desc, Œª () {
//     signalingChannel.send(JSON.stringify({
//       'sdp': pc.localDescription
//     }))
//   }, logError)
// }

// signalingChannel.onmessage = Œª (evt) {
//   if (!pc)
//     start()

//   message ‚Üê JSON.parse(evt.data)
//   if (message.sdp)
//     pc.setRemoteDescription(new RTCSessionDescription(message.sdp), Œª () {
//       // if we received an offer, we need to answer
//       if (pc.remoteDescription.type == 'offer')
//         pc.createAnswer(localDescCreated, logError)
//     }, logError)
//   else
//     pc.addIceCandidate(new RTCIceCandidate(message.candidate))
// }

// Œª logError(error) {
//   log(error.name + ': ' + error.message)
// }
