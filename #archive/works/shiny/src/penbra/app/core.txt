(ns penbra.app.core
  (:refer-clojure :exclude [print file-seq])
  (:use rainboom))

(defdoc ^:dynamic *app* nil "Current application.")
(defdoc ^:dynamic *hz* nil "Refresh rate of update-loop")

;;;

(defprotocol App
  (init! [app])
  (destroy! [app])
  (speed! [app speed])
  (now [app]))

(defmacro with-app [app & body]
  `(binding [*app* ~app]
     ~@body))
