ğ…ğ…® â† lines`
#ffffd9
#edf8b1
#c7e9b4
#7fcdbb
#41b6c4
#1d91c0
#225ea8
#253494
#081d58
`
c â† x=> color.infer0(ğ…ğ…®,x).hex()

eval_main(.setBounds({ ,x:0 ,y:0 ,width:1280 ,height:800 }))
style` body{ ;background:#2a2626 } `

exports.freqs = Î¹Î¹=>{

f_c_approx â† Î¹=>{ ğ…ª â† Math.log2 ;t â† 2^-4 ;â†© (ğ…ª(t+Î¹)-ğ…ª(t))/(ğ…ª(t+1)-ğ…ª(t)) }

yL â† Î¹Î¹.â€– ;xL â† Î¹Î¹[0].â€–
# pxX â† 200*2 ;pxY â† 2000*2
# pxX â† xL*7.32*2 ;pxY â† yL*4*2
pxX â† 127.33 ;pxY â† 947.1

# probably pxN needs to vary w the current screenpixelratio or w/e



# what if we enlarged the boxes to fit to pixels or 1/2 px, whichever is smaller
# â€¡â€¡â€¡ i think this is good? check me

antialias_rect_adjacent â† (x,y,w,h,pxX,pxY)=>{
	# pxX*=2
	# pxY*=2
	ğ…­ğ…¦ â† (L,f,Î¹)=> f(Î¹*L)/L
	rX0 â† ğ…­ğ…¦.P(pxX,floor)
	rX1 â† ğ…­ğ…¦.P(pxX,ceil)
	rY0 â† ğ…­ğ…¦.P(pxY,floor)
	rY1 â† ğ…­ğ…¦.P(pxY,ceil)
	x_ â† /*max( */rX0(x) # ,x-1/2/pxX )
	y_ â† /*max( */rY0(y) # ,y-1/2/pxY )
	x_2 â† /*min( */rX1(x+w) # ,(x+w)+1/2/pxX )
	y_2 â† /*min( */rY1(y+h) # ,(y+h)+1/2/pxY )
	# log('wtf',x_,x_2,x_*pxX,x_2*pxX,rX0(x)*pxX,(x-1/2/pxX)*pxX,rX1(x+w)*pxX,((x+w)+1/2/pxX)*pxX)
	# 110.33125 22.66875
	# 132.4975 23.16625

	# im starting to think that
	# canvas might be an easier target for this
	# uh, evaluate? â€¡â€¡â€¡

	â†© [x_,y_,x_2-x_,y_2-y_] }

document.body.appendChild( eval_html0(`
	<svg width="${pxX}" height="${pxY}" viewbox="0 0 1 1" preserveAspectRatio="none">
		${Î¹Î¹.mapâ€¦((Î¹,y)=> Î¹.map((Î¹,x,L)=>{
			[x_,y_,w,h] â† antialias_rect_adjacent(x/xL,y/yL,1/xL,1/yL,pxX,pxY)
			# for adjacent edges:
			# `<rect transform="translate(${x/xL-1/2/pxX},${y/yL-1/2/pxY})" width="${1/xL+1/pxX}" height="${1/yL+1/pxY}" fill="${c( Î¹ / L._.max() )}"></rect>`
			â†© `<rect Î¹="${Î¹}" transform="translate(${x_},${y_})" width="${w}" height="${h}" fill="${c(f_c_approx(Î¹))}"></rect>` })).join('')}
		</svg> `) )

}

################################################################################

# document.body.appendChild( eval_html0(`
# 	<svg width="200" height="200" viewbox="0 0 1 1">
# 		${â‹¯(10).map(x=> â‹¯(10).map(y=> `<rect x="${x/10}" y="${y/10}" width="0.1" height="0.1" fill="${_.range(0,1,0.01).map(c)[y*10+x]}"/>` )) .join('')}
# 		</svg> `) )
